var Widget=function(L){"use strict";var ji=Object.defineProperty;var qi=(L,U,z)=>U in L?ji(L,U,{enumerable:!0,configurable:!0,writable:!0,value:z}):L[U]=z;var Ln=(L,U,z)=>(qi(L,typeof U!="symbol"?U+"":U,z),z);const U=(e,t)=>`gid://shopify/${e}/${t}`,z=e=>U("Product",e),Me={appName:"XP: External Links & Buttons",windowRuntimeKey:"BLINKS_APP_RUNTIME"},Un=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),gt={buttons:[],block:{maxWidth:"100%",fontFamily:"inherit",gap:"8px",direction:"column",background:"transparent",borderRadius:"0px",margin:null,padding:null},title:{show:!0,align:"left",inheritStyle:!0,value:"Title",color:"#000000",fontFamily:"inherit",fontSize:"18px",fontWeight:"500",margin:{bottom:"12px"}},list:{align:"full",gap:"12px"},hideElements:{enable:!1,rules:[]},userCss:""};var ee=(e=>(e.Shopify="Shopify",e.Demo="Demo",e))(ee||{}),pe,m,kt,G,Nt,wt,Le,xt,ue={},Et=[],Hn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ve=Array.isArray;function B(e,t){for(var n in t)e[n]=t[n];return e}function St(e){var t=e.parentNode;t&&t.removeChild(e)}function Ue(e,t,n){var r,i,a,o={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?pe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return he(e,o,r,i,null)}function he(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++kt,__i:-1,__u:0};return i==null&&m.vnode!=null&&m.vnode(a),a}function H(e){return e.children}function R(e,t){this.props=e,this.context=t}function te(e,t){if(t==null)return e.__?te(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?te(e):null}function $t(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return $t(e)}}function He(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!me.__r++||Nt!==m.debounceRendering)&&((Nt=m.debounceRendering)||wt)(me)}function me(){var e,t,n,r,i,a,o,l,c;for(G.sort(Le);e=G.shift();)e.__d&&(t=G.length,r=void 0,a=(i=(n=e).__v).__e,l=[],c=[],(o=n.__P)&&((r=B({},i)).__v=i.__v+1,m.vnode&&m.vnode(r),Be(o,r,i,n.__n,o.ownerSVGElement!==void 0,32&i.__u?[a]:null,l,a??te(i),!!(32&i.__u),c),r.__.__k[r.__i]=r,Pt(l,r,c),r.__e!=a&&$t(r)),G.length>t&&G.sort(Le));me.__r=0}function Ot(e,t,n,r,i,a,o,l,c,u,f){var s,d,_,h,k,w=r&&r.__k||Et,p=t.length;for(n.__d=c,Bn(n,t,w),c=n.__d,s=0;s<p;s++)(_=n.__k[s])!=null&&typeof _!="boolean"&&typeof _!="function"&&(d=_.__i===-1?ue:w[_.__i]||ue,_.__i=s,Be(e,_,d,i,a,o,l,c,u,f),h=_.__e,_.ref&&d.ref!=_.ref&&(d.ref&&We(d.ref,null,_),f.push(_.ref,_.__c||h,_)),k==null&&h!=null&&(k=h),65536&_.__u||d.__k===_.__k?c=Dt(_,c,e):typeof _.type=="function"&&_.__d!==void 0?c=_.__d:h&&(c=h.nextSibling),_.__d=void 0,_.__u&=-196609);n.__d=c,n.__e=k}function Bn(e,t,n){var r,i,a,o,l,c=t.length,u=n.length,f=u,s=0;for(e.__k=[],r=0;r<c;r++)(i=e.__k[r]=(i=t[r])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?he(null,i,null,null,i):ve(i)?he(H,{children:i},null,null,null):i.__b>0?he(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=e,i.__b=e.__b+1,l=Wn(i,n,o=r+s,f),i.__i=l,a=null,l!==-1&&(f--,(a=n[l])&&(a.__u|=131072)),a==null||a.__v===null?(l==-1&&s--,typeof i.type!="function"&&(i.__u|=65536)):l!==o&&(l===o+1?s++:l>o?f>c-o?s+=l-o:s--:s=l<o&&l==o-1?l-o:0,l!==r+s&&(i.__u|=65536))):(a=n[r])&&a.key==null&&a.__e&&(a.__e==e.__d&&(e.__d=te(a)),ze(a,a,!1),n[r]=null,f--);if(f)for(r=0;r<u;r++)(a=n[r])!=null&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=te(a)),ze(a,a))}function Dt(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=Dt(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function ye(e,t){return t=t||[],e==null||typeof e=="boolean"||(ve(e)?e.some(function(n){ye(n,t)}):t.push(e)),t}function Wn(e,t,n,r){var i=e.key,a=e.type,o=n-1,l=n+1,c=t[n];if(c===null||c&&i==c.key&&a===c.type)return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;o>=0||l<t.length;){if(o>=0){if((c=t[o])&&!(131072&c.__u)&&i==c.key&&a===c.type)return o;o--}if(l<t.length){if((c=t[l])&&!(131072&c.__u)&&i==c.key&&a===c.type)return l;l++}}return-1}function At(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Hn.test(t)?n:n+"px"}function be(e,t,n,r,i){var a;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||At(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||At(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,a?Ct:Tt,a)):e.removeEventListener(t,a?Ct:Tt,a);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Tt(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(m.event?m.event(e):e)}function Ct(e){return this.l[e.type+!0](m.event?m.event(e):e)}function Be(e,t,n,r,i,a,o,l,c,u){var f,s,d,_,h,k,w,p,g,E,v,b,y,A,X,j=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),a=[l=t.__e=n.__e]),(f=m.__b)&&f(t);e:if(typeof j=="function")try{if(p=t.props,g=(f=j.contextType)&&r[f.__c],E=f?g?g.props.value:f.__:r,n.__c?w=(s=t.__c=n.__c).__=s.__E:("prototype"in j&&j.prototype.render?t.__c=s=new j(p,E):(t.__c=s=new R(p,E),s.constructor=j,s.render=Gn),g&&g.sub(s),s.props=p,s.state||(s.state={}),s.context=E,s.__n=r,d=s.__d=!0,s.__h=[],s._sb=[]),s.__s==null&&(s.__s=s.state),j.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=B({},s.__s)),B(s.__s,j.getDerivedStateFromProps(p,s.__s))),_=s.props,h=s.state,s.__v=t,d)j.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(j.getDerivedStateFromProps==null&&p!==_&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(p,E),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(p,s.__s,E)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(s.props=p,s.state=s.__s,s.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(Re){Re&&(Re.__=t)}),v=0;v<s._sb.length;v++)s.__h.push(s._sb[v]);s._sb=[],s.__h.length&&o.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(p,s.__s,E),s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(_,h,k)})}if(s.context=E,s.props=p,s.__P=e,s.__e=!1,b=m.__r,y=0,"prototype"in j&&j.prototype.render){for(s.state=s.__s,s.__d=!1,b&&b(t),f=s.render(s.props,s.state,s.context),A=0;A<s._sb.length;A++)s.__h.push(s._sb[A]);s._sb=[]}else do s.__d=!1,b&&b(t),f=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++y<25);s.state=s.__s,s.getChildContext!=null&&(r=B(B({},r),s.getChildContext())),d||s.getSnapshotBeforeUpdate==null||(k=s.getSnapshotBeforeUpdate(_,h)),Ot(e,ve(X=f!=null&&f.type===H&&f.key==null?f.props.children:f)?X:[X],t,n,r,i,a,o,l,c,u),s.base=t.__e,t.__u&=-161,s.__h.length&&o.push(s),w&&(s.__E=s.__=null)}catch(Re){t.__v=null,c||a!=null?(t.__e=l,t.__u|=c?160:32,a[a.indexOf(l)]=null):(t.__e=n.__e,t.__k=n.__k),m.__e(Re,t,n)}else a==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=zn(n.__e,t,n,r,i,a,o,c,u);(f=m.diffed)&&f(t)}function Pt(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)We(n[r],n[++r],n[++r]);m.__c&&m.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){m.__e(a,i.__v)}})}function zn(e,t,n,r,i,a,o,l,c){var u,f,s,d,_,h,k,w=n.props,p=t.props,g=t.type;if(g==="svg"&&(i=!0),a!=null){for(u=0;u<a.length;u++)if((_=a[u])&&"setAttribute"in _==!!g&&(g?_.localName===g:_.nodeType===3)){e=_,a[u]=null;break}}if(e==null){if(g===null)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,p.is&&p),a=null,l=!1}if(g===null)w===p||l&&e.data===p||(e.data=p);else{if(a=a&&pe.call(e.childNodes),w=n.props||ue,!l&&a!=null)for(w={},u=0;u<e.attributes.length;u++)w[(_=e.attributes[u]).name]=_.value;for(u in w)_=w[u],u=="children"||(u=="dangerouslySetInnerHTML"?s=_:u==="key"||u in p||be(e,u,null,_,i));for(u in p)_=p[u],u=="children"?d=_:u=="dangerouslySetInnerHTML"?f=_:u=="value"?h=_:u=="checked"?k=_:u==="key"||l&&typeof _!="function"||w[u]===_||be(e,u,_,w[u],i);if(f)l||s&&(f.__html===s.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(s&&(e.innerHTML=""),Ot(e,ve(d)?d:[d],t,n,r,i&&g!=="foreignObject",a,o,a?a[0]:n.__k&&te(n,0),l,c),a!=null)for(u=a.length;u--;)a[u]!=null&&St(a[u]);l||(u="value",h!==void 0&&(h!==e[u]||g==="progress"&&!h||g==="option"&&h!==w[u])&&be(e,u,h,w[u],!1),u="checked",k!==void 0&&k!==e[u]&&be(e,u,k,w[u],!1))}return e}function We(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){m.__e(r,n)}}function ze(e,t,n){var r,i;if(m.unmount&&m.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||We(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){m.__e(a,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ze(r[i],t,n||typeof e.type!="function");n||e.__e==null||St(e.__e),e.__=e.__e=e.__d=void 0}function Gn(e,t,n){return this.constructor(e,n)}function Qn(e,t,n){var r,i,a,o;m.__&&m.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,a=[],o=[],Be(t,e=(!r&&n||t).__k=Ue(H,null,[e]),i||ue,ue,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?pe.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r,o),Pt(a,e,o)}function Ge(e,t){var n={__c:t="__cC"+xt++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,a;return this.getChildContext||(i=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&i.some(function(l){l.__e=!0,He(l)})},this.sub=function(o){i.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){i.splice(i.indexOf(o),1),l&&l.call(o)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}pe=Et.slice,m={__e:function(e,t,n,r){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(l){e=l}throw e}},kt=0,R.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=B({},this.state),typeof e=="function"&&(e=e(B({},n),this.props)),e&&B(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),He(this))},R.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),He(this))},R.prototype.render=H,G=[],wt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Le=function(e,t){return e.__v.__b-t.__v.__b},me.__r=0,xt=0;function Qe(e,t){return m.__a&&m.__a(t),e}typeof window<"u"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.19.2",m,{Fragment:H,Component:R});var ne,O,Je,Vt,ce=0,It=[],ge=[],Ft=m.__b,jt=m.__r,qt=m.diffed,Rt=m.__c,Mt=m.unmount;function ke(e,t){m.__h&&m.__h(O,e,ce||t),ce=0;var n=O.__H||(O.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ge}),n.__[e]}function Lt(e){return ce=1,Jn(Wt,e)}function Jn(e,t,n){var r=ke(ne++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Wt(void 0,t),function(l){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,l);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=O,!O.u)){var i=function(l,c,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(d){return d.__c});if(f.every(function(d){return!d.__N}))return!a||a.call(this,l,c,u);var s=!1;return f.forEach(function(d){if(d.__N){var _=d.__[0];d.__=d.__N,d.__N=void 0,_!==d.__[0]&&(s=!0)}}),!(!s&&r.__c.props===l)&&(!a||a.call(this,l,c,u))};O.u=!0;var a=O.shouldComponentUpdate,o=O.componentWillUpdate;O.componentWillUpdate=function(l,c,u){if(this.__e){var f=a;a=void 0,i(l,c,u),a=f}o&&o.call(this,l,c,u)},O.shouldComponentUpdate=i}return r.__N||r.__}function Ye(e,t){var n=ke(ne++,3);!m.__s&&Bt(n.__H,t)&&(n.__=e,n.i=t,O.__H.__h.push(n))}function Yn(e){return ce=5,re(function(){return{current:e}},[])}function re(e,t){var n=ke(ne++,7);return Bt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Ut(e,t){return ce=8,re(function(){return e},t)}function Ke(e){var t=O.context[e.__c],n=ke(ne++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(O)),t.props.value):e.__}function Kn(){for(var e;e=It.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ne),e.__H.__h.forEach(Ze),e.__H.__h=[]}catch(t){e.__H.__h=[],m.__e(t,e.__v)}}m.__b=function(e){O=null,Ft&&Ft(e)},m.__r=function(e){jt&&jt(e),ne=0;var t=(O=e.__c).__H;t&&(Je===O?(t.__h=[],O.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ge,n.__N=n.i=void 0})):(t.__h.forEach(Ne),t.__h.forEach(Ze),t.__h=[],ne=0)),Je=O},m.diffed=function(e){qt&&qt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(It.push(t)!==1&&Vt===m.requestAnimationFrame||((Vt=m.requestAnimationFrame)||Zn)(Kn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ge&&(n.__=n.__V),n.i=void 0,n.__V=ge})),Je=O=null},m.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ne),n.__h=n.__h.filter(function(r){return!r.__||Ze(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],m.__e(r,n.__v)}}),Rt&&Rt(e,t)},m.unmount=function(e){Mt&&Mt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ne(r)}catch(i){t=i}}),n.__H=void 0,t&&m.__e(t,n.__v))};var Ht=typeof requestAnimationFrame=="function";function Zn(e){var t,n=function(){clearTimeout(r),Ht&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ht&&(t=requestAnimationFrame(n))}function Ne(e){var t=O,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),O=t}function Ze(e){var t=O;e.__c=e.__(),O=t}function Bt(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Wt(e,t){return typeof t=="function"?t(e):t}var W={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};class Xe extends Error{constructor(t,n,r,i,a,o,l){super(t),this.name="GraphQLError",this.message=t,a&&(this.path=a),n&&(this.nodes=Array.isArray(n)?n:[n]),r&&(this.source=r),i&&(this.positions=i),o&&(this.originalError=o);var c=l;if(!c&&o){var u=o.extensions;u&&typeof u=="object"&&(c=u)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var $,N;function D(e){return new Xe(`Syntax Error: Unexpected token at ${N} in ${e}`)}function P(e){if(e.lastIndex=N,e.test($))return $.slice(N,N=e.lastIndex)}var we=/ +(?=[^\s])/y;function Xn(e){for(var t=e.split(`
`),n="",r=0,i=0,a=t.length-1,o=0;o<t.length;o++)we.lastIndex=0,we.test(t[o])&&(o&&(!r||we.lastIndex<r)&&(r=we.lastIndex),i=i||o,a=o);for(var l=i;l<=a;l++)l!==i&&(n+=`
`),n+=t[l].slice(r).replace(/\\"""/g,'"""');return n}function x(){for(var e=0|$.charCodeAt(N++);e===9||e===10||e===13||e===32||e===35||e===44||e===65279;e=0|$.charCodeAt(N++))if(e===35)for(;(e=$.charCodeAt(N++))!==10&&e!==13;);N--}var zt=/[_A-Za-z]\w*/y;function M(){var e;if(e=P(zt))return{kind:"Name",value:e}}var er=/(?:null|true|false)/y,Gt=/\$[_A-Za-z]\w*/y,tr=/-?\d+/y,nr=/(?:\.\d+)?[eE][+-]?\d+|\.\d+/y,rr=/\\/g,ir=/"""(?:"""|(?:[\s\S]*?[^\\])""")/y,ar=/"(?:"|[^\r\n]*?[^\\]")/y;function xe(e){var t,n;if(n=P(er))t=n==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:n==="true"};else if(!e&&(n=P(Gt)))t={kind:"Variable",name:{kind:"Name",value:n.slice(1)}};else if(n=P(tr)){var r=n;(n=P(nr))?t={kind:"FloatValue",value:r+n}:t={kind:"IntValue",value:r}}else if(n=P(zt))t={kind:"EnumValue",value:n};else if(n=P(ir))t={kind:"StringValue",value:Xn(n.slice(3,-3)),block:!0};else if(n=P(ar))t={kind:"StringValue",value:rr.test(n)?JSON.parse(n):n.slice(1,-1),block:!1};else if(t=function(a){var o;if($.charCodeAt(N)===91){N++,x();for(var l=[];o=xe(a);)l.push(o);if($.charCodeAt(N++)!==93)throw D("ListValue");return x(),{kind:"ListValue",values:l}}}(e)||function(a){if($.charCodeAt(N)===123){N++,x();for(var o=[],l;l=M();){if(x(),$.charCodeAt(N++)!==58)throw D("ObjectField");x();var c=xe(a);if(!c)throw D("ObjectField");o.push({kind:"ObjectField",name:l,value:c})}if($.charCodeAt(N++)!==125)throw D("ObjectValue");return x(),{kind:"ObjectValue",fields:o}}}(e))return t;return x(),t}function Qt(e){var t=[];if(x(),$.charCodeAt(N)===40){N++,x();for(var n;n=M();){if(x(),$.charCodeAt(N++)!==58)throw D("Argument");x();var r=xe(e);if(!r)throw D("Argument");t.push({kind:"Argument",name:n,value:r})}if(!t.length||$.charCodeAt(N++)!==41)throw D("Argument");x()}return t}function ie(e){var t=[];for(x();$.charCodeAt(N)===64;){N++;var n=M();if(!n)throw D("Directive");x(),t.push({kind:"Directive",name:n,arguments:Qt(e)})}return t}function or(){var e=M();if(e){x();var t;if($.charCodeAt(N)===58){if(N++,x(),t=e,!(e=M()))throw D("Field");x()}return{kind:"Field",alias:t,name:e,arguments:Qt(!1),directives:ie(!1),selectionSet:Ee()}}}function Jt(){var e;if(x(),$.charCodeAt(N)===91){N++,x();var t=Jt();if(!t||$.charCodeAt(N++)!==93)throw D("ListType");e={kind:"ListType",type:t}}else if(e=M())e={kind:"NamedType",name:e};else throw D("NamedType");return x(),$.charCodeAt(N)===33?(N++,x(),{kind:"NonNullType",type:e}):e}var sr=/on/y;function Yt(){if(P(sr)){x();var e=M();if(!e)throw D("NamedType");return x(),{kind:"NamedType",name:e}}}var lr=/\.\.\./y;function ur(){if(P(lr)){x();var e=N,t;if((t=M())&&t.value!=="on")return{kind:"FragmentSpread",name:t,directives:ie(!1)};N=e;var n=Yt(),r=ie(!1),i=Ee();if(!i)throw D("InlineFragment");return{kind:"InlineFragment",typeCondition:n,directives:r,selectionSet:i}}}function Ee(){var e;if(x(),$.charCodeAt(N)===123){N++,x();for(var t=[];e=ur()||or();)t.push(e);if(!t.length||$.charCodeAt(N++)!==125)throw D("SelectionSet");return x(),{kind:"SelectionSet",selections:t}}}var cr=/fragment/y;function fr(){if(P(cr)){x();var e=M();if(!e)throw D("FragmentDefinition");x();var t=Yt();if(!t)throw D("FragmentDefinition");var n=ie(!1),r=Ee();if(!r)throw D("FragmentDefinition");return{kind:"FragmentDefinition",name:e,typeCondition:t,directives:n,selectionSet:r}}}var _r=/(?:query|mutation|subscription)/y;function dr(){var e,t,n=[],r=[];(e=P(_r))&&(x(),t=M(),n=function(){var o,l=[];if(x(),$.charCodeAt(N)===40){for(N++,x();o=P(Gt);){if(x(),$.charCodeAt(N++)!==58)throw D("VariableDefinition");var c=Jt(),u=void 0;if($.charCodeAt(N)===61&&(N++,x(),!(u=xe(!0))))throw D("VariableDefinition");x(),l.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:o.slice(1)}},type:c,defaultValue:u,directives:ie(!0)})}if($.charCodeAt(N++)!==41)throw D("VariableDefinition");x()}return l}(),r=ie(!1));var i=Ee();if(i)return{kind:"OperationDefinition",operation:e||"query",name:t,variableDefinitions:n,directives:r,selectionSet:i}}function pr(e,t){return $=typeof e.body=="string"?e.body:e,N=0,function(){var r;x();for(var i=[];r=fr()||dr();)i.push(r);return{kind:"Document",definitions:i}}()}function vr(e){return JSON.stringify(e)}function hr(e){return`"""
`+e.replace(/"""/g,'\\"""')+`
"""`}var I=e=>!(!e||!e.length),C={OperationDefinition(e){if(e.operation==="query"&&!e.name&&!I(e.variableDefinitions)&&!I(e.directives))return C.SelectionSet(e.selectionSet);var t=e.operation;return e.name&&(t+=" "+e.name.value),I(e.variableDefinitions)&&(e.name||(t+=" "),t+="("+e.variableDefinitions.map(C.VariableDefinition).join(", ")+")"),I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),t+" "+C.SelectionSet(e.selectionSet)},VariableDefinition(e){var t=C.Variable(e.variable)+": "+F(e.type);return e.defaultValue&&(t+=" = "+F(e.defaultValue)),I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),t},Field(e){var t=(e.alias?e.alias.value+": ":"")+e.name.value;if(I(e.arguments)){var n=e.arguments.map(C.Argument),r=t+"("+n.join(", ")+")";t=r.length>80?t+`(
  `+n.join(`
`).replace(/\n/g,`
  `)+`
)`:r}return I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),e.selectionSet?t+" "+C.SelectionSet(e.selectionSet):t},StringValue:e=>e.block?hr(e.value):vr(e.value),BooleanValue:e=>""+e.value,NullValue:e=>"null",IntValue:e=>e.value,FloatValue:e=>e.value,EnumValue:e=>e.value,Name:e=>e.value,Variable:e=>"$"+e.name.value,ListValue:e=>"["+e.values.map(F).join(", ")+"]",ObjectValue:e=>"{"+e.fields.map(C.ObjectField).join(", ")+"}",ObjectField:e=>e.name.value+": "+F(e.value),Document:e=>I(e.definitions)?e.definitions.map(F).join(`

`):"",SelectionSet:e=>`{
  `+e.selections.map(F).join(`
`).replace(/\n/g,`
  `)+`
}`,Argument:e=>e.name.value+": "+F(e.value),FragmentSpread(e){var t="..."+e.name.value;return I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),t},InlineFragment(e){var t="...";return e.typeCondition&&(t+=" on "+e.typeCondition.name.value),I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),t+" "+F(e.selectionSet)},FragmentDefinition(e){var t="fragment "+e.name.value;return t+=" on "+e.typeCondition.name.value,I(e.directives)&&(t+=" "+e.directives.map(C.Directive).join(" ")),t+" "+F(e.selectionSet)},Directive(e){var t="@"+e.name.value;return I(e.arguments)&&(t+="("+e.arguments.map(C.Argument).join(", ")+")"),t},NamedType:e=>e.name.value,ListType:e=>"["+F(e.type)+"]",NonNullType:e=>F(e.type)+"!"};function F(e){return C[e.kind]?C[e.kind](e):""}var Kt=()=>{},V=Kt;function q(e){return{tag:0,0:e}}function fe(e){return{tag:1,0:e}}var Zt=()=>typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator",mr=e=>e;function T(e){return t=>n=>{var r=V;t(i=>{i===0?n(0):i.tag===0?(r=i[0],n(i)):e(i[0])?n(i):r(0)})}}function ae(e){return t=>n=>t(r=>{r===0||r.tag===0?n(r):n(fe(e(r[0])))})}function Xt(e){return t=>n=>{var r=[],i=V,a=!1,o=!1;t(l=>{o||(l===0?(o=!0,r.length||n(0)):l.tag===0?i=l[0]:(a=!1,function(u){var f=V;u(s=>{if(s===0){if(r.length){var d=r.indexOf(f);d>-1&&(r=r.slice()).splice(d,1),r.length||(o?n(0):a||(a=!0,i(0)))}}else s.tag===0?(r.push(f=s[0]),f(0)):r.length&&(n(s),f(0))})}(e(l[0])),a||(a=!0,i(0))))}),n(q(l=>{if(l===1){o||(o=!0,i(1));for(var c=0,u=r,f=r.length;c<f;c++)u[c](1);r.length=0}else{!o&&!a?(a=!0,i(0)):a=!1;for(var s=0,d=r,_=r.length;s<_;s++)d[s](0)}}))}}function yr(e){return Xt(mr)(e)}function Q(e){return yr(kr(e))}function et(e){return t=>n=>{var r=!1;t(i=>{if(!r)if(i===0)r=!0,n(0),e();else if(i.tag===0){var a=i[0];n(q(o=>{o===1?(r=!0,a(1),e()):a(o)}))}else n(i)})}}function oe(e){return t=>n=>{var r=!1;t(i=>{if(!r)if(i===0)r=!0,n(0);else if(i.tag===0){var a=i[0];n(q(o=>{o===1&&(r=!0),a(o)}))}else e(i[0]),n(i)})}}function tt(e){return t=>n=>t(r=>{r===0?n(0):r.tag===0?(n(r),e()):n(r)})}function _e(e){var t=[],n=V,r=!1;return i=>{t.push(i),t.length===1&&e(a=>{if(a===0){for(var o=0,l=t,c=t.length;o<c;o++)l[o](0);t.length=0}else if(a.tag===0)n=a[0];else{r=!1;for(var u=0,f=t,s=t.length;u<s;u++)f[u](a)}}),i(q(a=>{if(a===1){var o=t.indexOf(i);o>-1&&(t=t.slice()).splice(o,1),t.length||n(1)}else r||(r=!0,n(0))}))}}function en(e){return t=>n=>{var r=V,i=V,a=!1,o=!1,l=!1,c=!1;t(u=>{c||(u===0?(c=!0,l||n(0)):u.tag===0?r=u[0]:(l&&(i(1),i=V),a?a=!1:(a=!0,r(0)),function(s){l=!0,s(d=>{l&&(d===0?(l=!1,c?n(0):a||(a=!0,r(0))):d.tag===0?(o=!1,(i=d[0])(0)):(n(d),o?o=!1:i(0)))})}(e(u[0]))))}),n(q(u=>{u===1?(c||(c=!0,r(1)),l&&(l=!1,i(1))):(!c&&!a&&(a=!0,r(0)),l&&!o&&(o=!0,i(0)))}))}}function nt(e){return t=>n=>{var r=V,i=!1,a=0;t(o=>{i||(o===0?(i=!0,n(0)):o.tag===0?e<=0?(i=!0,n(0),o[0](1)):r=o[0]:a++<e?(n(o),!i&&a>=e&&(i=!0,n(0),r(1))):n(o))}),n(q(o=>{o===1&&!i?(i=!0,r(1)):o===0&&!i&&a<e&&r(0)}))}}function tn(e){return t=>n=>{var r=V,i=V,a=!1;t(o=>{a||(o===0?(a=!0,i(1),n(0)):o.tag===0?(r=o[0],e(l=>{l===0||(l.tag===0?(i=l[0])(0):(a=!0,i(1),r(1),n(0)))})):n(o))}),n(q(o=>{o===1&&!a?(a=!0,r(1),i(1)):a||r(0)}))}}function nn(e,t){return n=>r=>{var i=V,a=!1;n(o=>{a||(o===0?(a=!0,r(0)):o.tag===0?(i=o[0],r(o)):e(o[0])?r(o):(a=!0,t&&r(o),r(0),i(1)))})}}function br(e){return t=>e()(t)}function rn(e){return t=>{var n=e[Zt()]&&e[Zt()]()||e,r=!1,i=!1,a=!1,o;t(q(async l=>{if(l===1)r=!0,n.return&&n.return();else if(i)a=!0;else{for(a=i=!0;a&&!r;)if((o=await n.next()).done)r=!0,n.return&&await n.return(),t(0);else try{a=!1,t(fe(o.value))}catch(c){if(n.throw)(r=!!(await n.throw(c)).done)&&t(0);else throw c}i=!1}}))}}function gr(e){return e[Symbol.asyncIterator]?rn(e):t=>{var n=e[Symbol.iterator](),r=!1,i=!1,a=!1,o;t(q(l=>{if(l===1)r=!0,n.return&&n.return();else if(i)a=!0;else{for(a=i=!0;a&&!r;)if((o=n.next()).done)r=!0,n.return&&n.return(),t(0);else try{a=!1,t(fe(o.value))}catch(c){if(n.throw)(r=!!n.throw(c).done)&&t(0);else throw c}i=!1}}))}}var kr=gr;function rt(e){return t=>{var n=!1;t(q(r=>{r===1?n=!0:n||(n=!0,t(fe(e)),t(0))}))}}function Nr(e){return t=>{var n=!1,r=e({next(i){n||t(fe(i))},complete(){n||(n=!0,t(0))}});t(q(i=>{i===1&&!n&&(n=!0,r())}))}}function Se(){var e,t;return{source:_e(Nr(n=>(e=n.next,t=n.complete,Kt))),next(n){e&&e(n)},complete(){t&&t()}}}function J(e){return t=>{var n=V,r=!1;return t(i=>{i===0?r=!0:i.tag===0?(n=i[0])(0):r||(e(i[0]),n(0))}),{unsubscribe(){r||(r=!0,n(1))}}}}function wr(e){J(t=>{})(e)}function an(e){return new Promise(t=>{var n=V,r;e(i=>{i===0?Promise.resolve(r).then(t):i.tag===0?(n=i[0])(0):(r=i[0],n(0))})})}var xr=e=>e&&e.message&&(e.extensions||e.name==="GraphQLError")?e:typeof e=="object"&&e.message?new Xe(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):new Xe(e);class it extends Error{constructor(t){var n=(t.graphQLErrors||[]).map(xr),r=((i,a)=>{var o="";if(i)return`[Network] ${i.message}`;if(a)for(var l of a)o&&(o+=`
`),o+=`[GraphQL] ${l.message}`;return o})(t.networkError,n);super(r),this.name="CombinedError",this.message=r,this.graphQLErrors=n,this.networkError=t.networkError,this.response=t.response}toString(){return this.message}}var at=(e,t)=>{for(var n=0|(t||5381),r=0,i=0|e.length;r<i;r++)n=(n<<5)+n+e.charCodeAt(r);return n},Y=new Set,on=new WeakMap,se=e=>{if(e===null||Y.has(e))return"null";if(typeof e!="object")return JSON.stringify(e)||"";if(e.toJSON)return se(e.toJSON());if(Array.isArray(e)){var t="[";for(var n of e)t.length>1&&(t+=","),t+=se(n)||"null";return t+="]"}else if(Oe!==le&&e instanceof Oe||De!==le&&e instanceof De)return"null";var r=Object.keys(e).sort();if(!r.length&&e.constructor&&e.constructor!==Object){var i=on.get(e)||Math.random().toString(36).slice(2);return on.set(e,i),se({__key:i})}Y.add(e);var a="{";for(var o of r){var l=se(e[o]);l&&(a.length>1&&(a+=","),a+=se(o)+":"+l)}return Y.delete(e),a+="}"},ot=(e,t,n)=>{if(!(n==null||typeof n!="object"||n.toJSON||Y.has(n)))if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++)ot(e,`${t}.${r}`,n[r]);else if(n instanceof Oe||n instanceof De)e.set(t,n);else{Y.add(n);for(var a of Object.keys(n))ot(e,`${t}.${a}`,n[a])}},$e=e=>(Y.clear(),se(e));class le{}var Oe=typeof File<"u"?File:le,De=typeof Blob<"u"?Blob:le,Er=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,Sr=/(?:#[^\n\r]+)?(?:[\r\n]+|$)/g,$r=(e,t)=>t%2==0?e.replace(Sr,`
`):e,sn=e=>e.split(Er).map($r).join("").trim(),ln=new Map,Ae=new Map,Te=e=>{var t;return typeof e=="string"?t=sn(e):e.loc&&Ae.get(e.__key)===e?t=e.loc.source.body:(t=ln.get(e)||sn(F(e)),ln.set(e,t)),typeof e!="string"&&!e.loc&&(e.loc={start:0,end:t.length,source:{body:t,name:"gql",locationOffset:{line:1,column:1}}}),t},un=e=>{var t=at(Te(e));if(e.definitions){var n=cn(e);n&&(t=at(`
# ${n}`,t))}return t},Ce=e=>{var t,n;return typeof e=="string"?(t=un(e),n=Ae.get(t)||pr(e)):(t=e.__key||un(e),n=Ae.get(t)||e),n.loc||Te(n),n.__key=t,Ae.set(t,n),n},de=(e,t,n)=>{var r=t||{},i=Ce(e),a=$e(r),o=i.__key;return a!=="{}"&&(o=at(a,o)),{key:o,query:i,variables:r,extensions:n}},cn=e=>{for(var t of e.definitions)if(t.kind===W.OPERATION_DEFINITION)return t.name?t.name.value:void 0},Or=e=>{for(var t of e.definitions)if(t.kind===W.OPERATION_DEFINITION)return t.operation},fn=(e,t,n)=>{if(!("data"in t||"errors"in t&&Array.isArray(t.errors)))throw new Error("No Content");var r=e.kind==="subscription";return{operation:e,data:t.data,error:Array.isArray(t.errors)?new it({graphQLErrors:t.errors,response:n}):void 0,extensions:t.extensions?{...t.extensions}:void 0,hasNext:t.hasNext==null?r:t.hasNext,stale:!1}},st=(e,t)=>{if(typeof e=="object"&&e!=null&&(!e.constructor||e.constructor===Object||Array.isArray(e))){e=Array.isArray(e)?[...e]:{...e};for(var n of Object.keys(t))e[n]=st(e[n],t[n]);return e}return t},Dr=(e,t,n,r)=>{var i=e.error?e.error.graphQLErrors:[],a=!!e.extensions||!!t.extensions,o={...e.extensions,...t.extensions},l=t.incremental;"path"in t&&(l=[t]);var c={data:e.data};if(l){var u=function(s){Array.isArray(s.errors)&&i.push(...s.errors),s.extensions&&(Object.assign(o,s.extensions),a=!0);var d="data",_=c,h=[];if(s.path)h=s.path;else if(r){var k=r.find(b=>b.id===s.id);s.subPath?h=[...k.path,...s.subPath]:h=k.path}for(var w=0,p=h.length;w<p;d=h[w++])_=_[d]=Array.isArray(_[d])?[..._[d]]:{..._[d]};if(s.items)for(var g=+d>=0?d:0,E=0,v=s.items.length;E<v;E++)_[g+E]=st(_[g+E],s.items[E]);else s.data!==void 0&&(_[d]=st(_[d],s.data))};for(var f of l)u(f)}else c.data=t.data||e.data,i=t.errors||i;return{operation:e.operation,data:c.data,error:i.length?new it({graphQLErrors:i,response:n}):void 0,extensions:a?o:void 0,hasNext:t.hasNext!=null?t.hasNext:e.hasNext,stale:!1}},_n=(e,t,n)=>({operation:e,data:void 0,error:new it({networkError:t,response:n}),extensions:void 0,hasNext:!1,stale:!1});function Ar(e){return{query:e.extensions&&e.extensions.persistedQuery&&!e.extensions.persistedQuery.miss?void 0:Te(e.query),operationName:cn(e.query),variables:e.variables||void 0,extensions:e.extensions}}var Tr=(e,t)=>{var n=e.kind==="query"&&e.context.preferGetMethod;if(!n||!t)return e.context.url;var r=new URL(e.context.url);for(var i in t){var a=t[i];a&&r.searchParams.set(i,typeof a=="object"?$e(a):a)}var o=r.toString();return o.length>2047&&n!=="force"?(e.context.preferGetMethod=!1,e.context.url):o},Cr=(e,t)=>{if(t&&!(e.kind==="query"&&e.context.preferGetMethod)){var n=$e(t),r=(l=>{var c=new Map;return(Oe!==le||De!==le)&&(Y.clear(),ot(c,"variables",l)),c})(t.variables);if(r.size){var i=new FormData;i.append("operations",n),i.append("map",$e({...[...r.keys()].map(l=>[l])}));var a=0;for(var o of r.values())i.append(""+a++,o);return i}return n}},Pr=(e,t)=>{var n={accept:e.kind==="subscription"?"text/event-stream, multipart/mixed":"application/graphql-response+json, application/graphql+json, application/json, text/event-stream, multipart/mixed"},r=(typeof e.context.fetchOptions=="function"?e.context.fetchOptions():e.context.fetchOptions)||{};if(r.headers)for(var i in r.headers)n[i.toLowerCase()]=r.headers[i];var a=Cr(e,t);return typeof a=="string"&&!n["content-type"]&&(n["content-type"]="application/json"),{...r,method:a?"POST":"GET",body:a,headers:n}},Vr=typeof TextDecoder<"u"?new TextDecoder:null,Ir=/boundary="?([^=";]+)"?/i,Fr=/data: ?([^\n]+)/,dn=e=>e.constructor.name==="Buffer"?e.toString():Vr.decode(e);async function*pn(e){if(e.body[Symbol.asyncIterator])for await(var t of e.body)yield dn(t);else{var n=e.body.getReader(),r;try{for(;!(r=await n.read()).done;)yield dn(r.value)}finally{n.cancel()}}}async function*vn(e,t){var n="",r;for await(var i of e)for(n+=i;(r=n.indexOf(t))>-1;)yield n.slice(0,r),n=n.slice(r+t.length)}async function*jr(e,t,n){var r=!0,i=null,a;try{yield await Promise.resolve();var o=(a=await(e.context.fetch||fetch)(t,n)).headers.get("Content-Type")||"",l;/multipart\/mixed/i.test(o)?l=async function*(s,d){var _=s.match(Ir),h="--"+(_?_[1]:"-"),k=!0,w;for await(var p of vn(pn(d),`\r
`+h)){if(k){k=!1;var g=p.indexOf(h);if(g>-1)p=p.slice(g+h.length);else continue}try{yield w=JSON.parse(p.slice(p.indexOf(`\r
\r
`)+4))}catch(E){if(!w)throw E}if(w&&w.hasNext===!1)break}w&&w.hasNext!==!1&&(yield{hasNext:!1})}(o,a):/text\/event-stream/i.test(o)?l=async function*(s){var d;for await(var _ of vn(pn(s),`

`)){var h=_.match(Fr);if(h){var k=h[1];try{yield d=JSON.parse(k)}catch(w){if(!d)throw w}if(d&&d.hasNext===!1)break}}d&&d.hasNext!==!1&&(yield{hasNext:!1})}(a):/text\//i.test(o)?l=async function*(s){var d=await s.text();try{var _=JSON.parse(d);({}).NODE_ENV!=="production"&&console.warn('Found response with content-type "text/plain" but it had a valid "application/json" response.'),yield _}catch{throw new Error(d)}}(a):l=async function*(s){yield JSON.parse(await s.text())}(a);var c;for await(var u of l)u.pending&&!i?c=u.pending:u.pending&&(c=[...c,...u.pending]),i=i?Dr(i,u,a,c):fn(e,u,a),r=!1,yield i,r=!0;i||(yield i=fn(e,{},a))}catch(f){if(!r)throw f;yield _n(e,a&&(a.status<200||a.status>=300)&&a.statusText?new Error(a.statusText):f,a)}}function qr(e,t,n){var r;return typeof AbortController<"u"&&(n.signal=(r=new AbortController).signal),et(()=>{r&&r.abort()})(T(i=>!!i)(rn(jr(e,t,n))))}var lt=(e,t)=>{if(Array.isArray(e))for(var n of e)lt(n,t);else if(typeof e=="object"&&e!==null)for(var r in e)r==="__typename"&&typeof e[r]=="string"?t.add(e[r]):lt(e[r],t);return t},ut=e=>{if("definitions"in e){var t=[];for(var n of e.definitions){var r=ut(n);t.push(r)}return{...e,definitions:t}}if("directives"in e&&e.directives&&e.directives.length){var i=[],a={};for(var o of e.directives){var l=o.name.value;l[0]!=="_"?i.push(o):l=l.slice(1),a[l]=o}e={...e,directives:i,_directives:a}}if("selectionSet"in e){var c=[],u=e.kind===W.OPERATION_DEFINITION;if(e.selectionSet){for(var f of e.selectionSet.selections||[]){u=u||f.kind===W.FIELD&&f.name.value==="__typename"&&!f.alias;var s=ut(f);c.push(s)}return u||c.push({kind:W.FIELD,name:{kind:W.NAME,value:"__typename"},_generated:!0}),{...e,selectionSet:{...e.selectionSet,selections:c}}}}return e},hn=new Map,Rr=e=>{var t=Ce(e),n=hn.get(t.__key);return n||(hn.set(t.__key,n=ut(t)),Object.defineProperty(n,"__key",{value:t.__key,enumerable:!1})),n},ct=(e,t)=>{if(!e||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>ct(i));if(e&&typeof e=="object"&&(t||"__typename"in e)){var n={};for(var r in e)r==="__typename"?Object.defineProperty(n,"__typename",{enumerable:!1,value:e.__typename}):n[r]=ct(e[r]);return n}else return e};function mn(e){var t=n=>e(n);return t.toPromise=()=>an(nt(1)(T(n=>!n.stale&&!n.hasNext)(t))),t.then=(n,r)=>t.toPromise().then(n,r),t.subscribe=n=>J(n)(t),t}function K(e,t,n){return{...t,kind:e,context:t.context?{...t.context,...n}:n||t.context}}var yn=(e,t)=>K(e.kind,e,{meta:{...e.context.meta,...t}}),Mr=()=>{};function Lr(e){for(var t=new Map,n=[],r=[],i=Array.isArray(e)?e[0]:e||"",a=1;a<arguments.length;a++){var o=arguments[a];o&&o.definitions?r.push(o):i+=o,i+=arguments[0][a]}r.unshift(Ce(i));for(var l of r)for(var c of l.definitions)if(c.kind===W.FRAGMENT_DEFINITION){var u=c.name.value,f=Te(c);t.has(u)?{}.NODE_ENV!=="production"&&t.get(u)!==f&&console.warn("[WARNING: Duplicate Fragment] A fragment with name `"+u+"` already exists in this document.\nWhile fragment names may not be unique across your source, each name must be unique per document."):(t.set(u,f),n.push(c))}else n.push(c);return Ce({kind:W.DOCUMENT,definitions:n})}var ft=({kind:e})=>e!=="mutation"&&e!=="query",Ur=e=>{var t=Rr(e.query);if(t!==e.query){var n=K(e.kind,e);return n.query=t,n}else return e},Hr=({forward:e,client:t,dispatchDebug:n})=>{var r=new Map,i=new Map,a=o=>o.kind==="query"&&o.context.requestPolicy!=="network-only"&&(o.context.requestPolicy==="cache-only"||r.has(o.key));return o=>{var l=ae(u=>{var f=r.get(u.key);({}).NODE_ENV!=="production"&&n({operation:u,...f?{type:"cacheHit",message:"The result was successfully retried from the cache"}:{type:"cacheMiss",message:"The result could not be retrieved from the cache"},source:"cacheExchange"});var s=f;return{}.NODE_ENV!=="production"&&(s={...s,operation:{}.NODE_ENV!=="production"?yn(u,{cacheOutcome:f?"hit":"miss"}):u}),u.context.requestPolicy==="cache-and-network"&&(s.stale=!0,bn(t,u)),s})(T(u=>!ft(u)&&a(u))(o)),c=oe(u=>{var{operation:f}=u;if(f){var s=f.context.additionalTypenames||[];if(u.operation.kind!=="subscription"&&(s=(b=>[...lt(b,new Set)])(u.data).concat(s)),u.operation.kind==="mutation"||u.operation.kind==="subscription"){var d=new Set;({}).NODE_ENV!=="production"&&n({type:"cacheInvalidation",message:`The following typenames have been invalidated: ${s}`,operation:f,data:{typenames:s,response:u},source:"cacheExchange"});for(var _=0;_<s.length;_++){var h=s[_],k=i.get(h);k||i.set(h,k=new Set);for(var w of k.values())d.add(w);k.clear()}for(var p of d.values())r.has(p)&&(f=r.get(p).operation,r.delete(p),bn(t,f))}else if(f.kind==="query"&&u.data){r.set(f.key,u);for(var g=0;g<s.length;g++){var E=s[g],v=i.get(E);v||i.set(E,v=new Set),v.add(f.key)}}}})(e(T(u=>u.kind!=="query"||u.context.requestPolicy!=="cache-only")(ae(u=>({}).NODE_ENV!=="production"?yn(u,{cacheOutcome:"miss"}):u)(Q([ae(Ur)(T(u=>!ft(u)&&!a(u))(o)),T(u=>ft(u))(o)])))));return Q([l,c])}},bn=(e,t)=>e.reexecuteOperation(K(t.kind,t,{requestPolicy:"network-only"})),Br=({forward:e,dispatchDebug:t})=>n=>{var r=Xt(a=>{var o=Ar(a),l=Tr(a,o),c=Pr(a,o);({}).NODE_ENV!=="production"&&t({type:"fetchRequest",message:"A fetch request is being executed.",operation:a,data:{url:l,fetchOptions:c},source:"fetchExchange"});var u=tn(T(f=>f.kind==="teardown"&&f.key===a.key)(n))(qr(a,l,c));return{}.NODE_ENV!=="production"?oe(f=>{var s=f.data?void 0:f.error;({}).NODE_ENV!=="production"&&t({type:s?"fetchError":"fetchSuccess",message:`A ${s?"failed":"successful"} fetch response has been returned.`,operation:a,data:{url:l,fetchOptions:c,value:s||f},source:"fetchExchange"})})(u):u})(T(a=>a.kind!=="teardown"&&(a.kind!=="subscription"||!!a.context.fetchSubscriptions))(n)),i=e(T(a=>a.kind==="teardown"||a.kind==="subscription"&&!a.context.fetchSubscriptions)(n));return Q([r,i])},Wr=e=>({client:t,forward:n,dispatchDebug:r})=>e.reduceRight((i,a)=>{var o=!1;return a({client:t,forward(l){if({}.NODE_ENV!=="production"){if(o)throw new Error("forward() must only be called once in each Exchange.");o=!0}return _e(i(_e(l)))},dispatchDebug(l){({}).NODE_ENV!=="production"&&r({timestamp:Date.now(),source:a.name,...l})}})},n),zr=({dispatchDebug:e})=>t=>({}.NODE_ENV!=="production"&&(t=oe(n=>{if(n.kind!=="teardown"&&{}.NODE_ENV!=="production"){var r=`No exchange has handled operations of kind "${n.kind}". Check whether you've added an exchange responsible for these operations.`;({}).NODE_ENV!=="production"&&e({type:"fallbackCatch",message:r,operation:n,source:"fallbackExchange"}),console.warn(r)}})(t)),T(n=>!1)(t)),Gr=function e(t){if({}.NODE_ENV!=="production"&&!t.url)throw new Error("You are creating an urql-client without a url.");var n=0,r=new Map,i=new Map,a=new Set,o=[],l={url:t.url,fetchSubscriptions:t.fetchSubscriptions,fetchOptions:t.fetchOptions,fetch:t.fetch,preferGetMethod:t.preferGetMethod,requestPolicy:t.requestPolicy||"cache-first"},c=Se();function u(v){(v.kind==="mutation"||v.kind==="teardown"||!a.has(v.key))&&(v.kind==="teardown"?a.delete(v.key):v.kind!=="mutation"&&a.add(v.key),c.next(v))}var f=!1;function s(v){if(v&&u(v),!f){for(f=!0;f&&(v=o.shift());)u(v);f=!1}}var d=v=>{var b=tn(T(y=>y.kind==="teardown"&&y.key===v.key)(c.source))(T(y=>y.operation.kind===v.kind&&y.operation.key===v.key&&(!y.operation.context._instance||y.operation.context._instance===v.context._instance))(E));return t.maskTypename&&(b=ae(y=>({...y,data:ct(y.data,!0)}))(b)),v.kind!=="query"?b=nn(y=>!!y.hasNext,!0)(b):b=en(y=>{var A=rt(y);return y.stale||y.hasNext?A:Q([A,ae(()=>(y.stale=!0,y))(nt(1)(T(X=>X.key===v.key)(c.source)))])})(b),v.kind!=="mutation"?b=et(()=>{a.delete(v.key),r.delete(v.key),i.delete(v.key),f=!1;for(var y=o.length-1;y>=0;y--)o[y].key===v.key&&o.splice(y,1);u(K("teardown",v,v.context))})(oe(y=>{if(y.stale){for(var A of o)if(A.key===y.operation.key){a.delete(A.key);break}}else y.hasNext||a.delete(v.key);r.set(v.key,y)})(b)):b=tt(()=>{u(v)})(b),_e(b)},_=this instanceof e?this:Object.create(e.prototype),h=Object.assign(_,{suspense:!!t.suspense,operations$:c.source,reexecuteOperation(v){if(v.kind==="teardown")s(v);else if(v.kind==="mutation"||i.has(v.key)){for(var b=!1,y=0;y<o.length;y++)b=b||o[y].key===v.key;b||a.delete(v.key),o.push(v),Promise.resolve().then(s)}},createRequestOperation(v,b,y){y||(y={});var A;if({}.NODE_ENV!=="production"&&v!=="teardown"&&(A=Or(b.query))!==v)throw new Error(`Expected operation of type "${v}" but found "${A}"`);return K(v,b,{_instance:v==="mutation"?n=n+1|0:void 0,...l,...y,requestPolicy:y.requestPolicy||l.requestPolicy,suspense:y.suspense||y.suspense!==!1&&h.suspense})},executeRequestOperation(v){return v.kind==="mutation"?mn(d(v)):mn(br(()=>{var b=i.get(v.key);b||i.set(v.key,b=d(v)),b=tt(()=>{s(v)})(b);var y=r.get(v.key);return v.kind==="query"&&y&&(y.stale||y.hasNext)?en(rt)(Q([b,T(A=>A===r.get(v.key))(rt(y))])):b}))},executeQuery(v,b){var y=h.createRequestOperation("query",v,b);return h.executeRequestOperation(y)},executeSubscription(v,b){var y=h.createRequestOperation("subscription",v,b);return h.executeRequestOperation(y)},executeMutation(v,b){var y=h.createRequestOperation("mutation",v,b);return h.executeRequestOperation(y)},readQuery(v,b,y){var A=null;return J(X=>{A=X})(h.query(v,b,y)).unsubscribe(),A},query:(v,b,y)=>h.executeQuery(de(v,b),y),subscription:(v,b,y)=>h.executeSubscription(de(v,b),y),mutation:(v,b,y)=>h.executeMutation(de(v,b),y)}),k=Mr;if({}.NODE_ENV!=="production"){var{next:w,source:p}=Se();h.subscribeToDebugTarget=v=>J(v)(p),k=w}var g=Wr(t.exchanges),E=_e(g({client:h,dispatchDebug:k,forward:zr({dispatchDebug:k})})(c.source));return wr(E),h};function Qr(e,t){for(var n in t)e[n]=t[n];return e}function gn(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function kn(e){this.props=e}(kn.prototype=new R).isPureReactComponent=!0,kn.prototype.shouldComponentUpdate=function(e,t){return gn(this.props,e)||gn(this.state,t)};var Nn=m.__b;m.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Nn&&Nn(e)};var Jr=m.__e;m.__e=function(e,t,n,r){if(e.then){for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}Jr(e,t,n,r)};var wn=m.unmount;function xn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Qr({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return xn(r,t,n)})),e}function En(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return En(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function _t(){this.__u=0,this.t=null,this.__b=null}function Sn(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Pe(){this.u=null,this.o=null}m.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),wn&&wn(e)},(_t.prototype=new R).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=Sn(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(l):l())};n.__R=o;var l=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=En(c,c.__c.__P,c.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.t.pop();)u.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},_t.prototype.componentWillUnmount=function(){this.t=[]},_t.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=xn(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&Ue(H,null,e.fallback);return i&&(i.__u&=-33),[Ue(H,null,t.__a?null:e.children),i]};var $n=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(Pe.prototype=new R).__a=function(e){var t=this,n=Sn(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),$n(t,e,r)):i()};n?n(a):a()}},Pe.prototype.render=function(e){this.u=null,this.o=new Map;var t=ye(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Pe.prototype.componentDidUpdate=Pe.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){$n(e,n,t)})};var Yr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Zr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Xr=/[A-Z0-9]/g,ei=typeof document<"u",ti=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};R.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(R.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var On=m.event;function ni(){}function ri(){return this.cancelBubble}function ii(){return this.defaultPrevented}m.event=function(e){return On&&(e=On(e)),e.persist=ni,e.isPropagationStopped=ri,e.isDefaultPrevented=ii,e.nativeEvent=e};var dt,ai={enumerable:!1,configurable:!0,get:function(){return this.class}},Dn=m.vnode;m.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={};for(var a in n){var o=n[a];if(!(a==="value"&&"defaultValue"in n&&o==null||ei&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&o===!0?o="":l==="ondoubleclick"?a="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||ti(n.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Zr.test(a)?a=l:r.indexOf("-")===-1&&Kr.test(a)?a=a.replace(Xr,"-$&").toLowerCase():o===null&&(o=void 0):l=a="oninput",l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=o}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ye(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=ye(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",ai)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=Yr,Dn&&Dn(e)};var An=m.__r;m.__r=function(e){An&&An(e),dt=e.__c};var Tn=m.diffed;m.diffed=function(e){Tn&&Tn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),dt=null};var oi={ReactCurrentDispatcher:{current:{readContext:function(e){return dt.__n[e.__c].props.value}}}},Cn={},Ve=Ge(Cn),si=Ve.Provider;Ve.Consumer,Ve.displayName="UrqlContext";var li=()=>{var e=Ke(Ve);if(e===Cn&&{}.NODE_ENV!=="production"){var t="No client has been specified using urql's Provider. please create a client and add a Provider.";throw console.error(t),new Error(t)}return e},ui={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0},ci=(e,t)=>e===t||!(!e||!t||e.key!==t.key),pt=(e,t)=>{var n={...e,...t,data:t.data!==void 0||t.error?t.data:e.data,fetching:!!t.fetching,stale:!!t.stale};return((r,i)=>{for(var a in r)if(!(a in i))return!0;for(var o in i)if(o==="operation"?!ci(r[o],i[o]):r[o]!==i[o])return!0;return!1})(e,n)?n:e},fi=(e,t)=>{for(var n=0,r=t.length;n<r;n++)if(e[n]!==t[n])return!0;return!1},vt=oi;function Pn(e,t){({}).NODE_ENV!=="production"&&vt&&vt.ReactCurrentOwner&&vt.ReactCurrentOwner.current?Promise.resolve(t).then(e):e(t)}function _i(e,t){var n=Yn(void 0);return re(()=>{var r=de(e,t);return n.current!==void 0&&n.current.key===r.key?n.current:(n.current=r,r)},[e,t])}var di=e=>{if(!e._react){var t=new Set,n=new Map;e.operations$&&J(r=>{r.kind==="teardown"&&t.has(r.key)&&(t.delete(r.key),n.delete(r.key))})(e.operations$),e._react={get:r=>n.get(r),set(r,i){t.delete(r),n.set(r,i)},dispose(r){t.add(r)}}}return e._react},pi=(e,t)=>t&&t.suspense!==void 0?!!t.suspense:e.suspense;function vi(e){var t=li(),n=di(t),r=pi(t,e.context),i=_i(e.query,e.variables),a=re(()=>{if(e.pause)return null;var d=t.executeQuery(i,{requestPolicy:e.requestPolicy,...e.context});return r?oe(_=>{n.set(i.key,_)})(d):d},[n,t,i,r,e.pause,e.requestPolicy,e.context]),o=Ut((d,_)=>{if(!d)return{fetching:!1};var h=n.get(i.key);if(h){if(_&&h!=null&&"then"in h)throw h}else{var k,w=J(g=>{h=g,k&&k(h)})(nn(()=>_&&!k||!h)(d));if(h==null&&_){var p=new Promise(g=>{k=g});throw n.set(i.key,p),p}else w.unsubscribe()}return h||{fetching:!0}},[n,i]),l=[t,i,e.requestPolicy,e.context,e.pause],[c,u]=Lt(()=>[a,pt(ui,o(a,r)),l]),f=c[1];a!==c[0]&&fi(c[2],l)&&u([a,f=pt(c[1],o(a,r)),l]),Ye(()=>{var d=c[0],_=c[2][1],h=!1,k=p=>{h=!0,Pn(u,g=>{var E=pt(g[1],p);return g[1]!==E?[g[0],E,g[2]]:g})};if(d){var w=J(k)(et(()=>{k({fetching:!1})})(d));return h||k({fetching:!0}),()=>{n.dispose(_.key),w.unsubscribe()}}else k({fetching:!1})},[n,c[0],c[2][1]]);var s=Ut(d=>{var _={requestPolicy:e.requestPolicy,...e.context,...d};Pn(u,h=>[r?oe(k=>{n.set(i.key,k)})(t.executeQuery(i,_)):t.executeQuery(i,_),h[1],l])},[t,n,i,r,e.requestPolicy,e.context,e.pause]);return[f,s]}var hi=0;function S(e,t,n,r,i,a){var o,l,c={};for(l in t)l=="ref"?o=t[l]:c[l]=t[l];var u={type:e,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--hi,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(o=e.defaultProps))for(l in o)c[l]===void 0&&(c[l]=o[l]);return m.vnode&&m.vnode(u),u}var mi="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/providers/SettingsProvider.tsx";const Vn=Ge(void 0),Ie=()=>Ke(Vn),In=e=>{if(typeof e=="object"&&"block"in e)return e;try{const t=JSON.parse(e);if(typeof t=="object"&&"block"in t)return t}catch{}return gt},yi=({children:e,bootstrap:t})=>{const[n,r]=Qe(Lt(()=>In(t==null?void 0:t.settings)),"settings"),i={settings:n??gt,isDemo:(t==null?void 0:t.platform)===ee.Demo,bootstrap:t||{}};return Ye(()=>{r(In(t==null?void 0:t.settings))},[t]),Ye(()=>{let a;try{typeof(t==null?void 0:t.settings)=="string"&&(a=JSON.parse(t.settings))}catch{a=null}if((t==null?void 0:t.platform)===ee.Demo)console.log(Me.appName,a);else{const o={...t,settings:a};console.log(Me.appName,o)}},[t]),S(Vn.Provider,{value:i,children:e},void 0,!1,{fileName:mi,lineNumber:81,columnNumber:5},void 0)};var bi="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/providers/DataProvider.tsx";const Fn=Ge(void 0),jn=()=>Ke(Fn),gi=Lr`
  query ($id: ID!, $identifiers: [HasMetafieldsIdentifier!]!) {
    product(id: $id) {
      id
      handle
      metafields(identifiers: $identifiers) {
        id
        value
        key
        namespace
        parentResource {
          __typename
        }
      }
    }
  }
`,ki=({children:e,bootstrap:t})=>{var c;const{settings:{buttons:n}}=Ie(),r=z(((c=t==null?void 0:t.productId)==null?void 0:c.toString())??""),i=n.flatMap(u=>[u.data.label.metafield,u.data.url.metafield].filter(Boolean)),[{fetching:a,data:o}]=vi({query:gi,variables:{id:r,identifiers:i.map(({namespace:u,key:f})=>({namespace:u,key:f}))},pause:(t==null?void 0:t.platform)===ee.Demo}),l=Qe(re(()=>{const u=new Map;return(t==null?void 0:t.platform)===ee.Demo?n.forEach(f=>{if(f.data.label.metafield){const s=f.data.label.metafield;u.set(`${s.namespace}.${s.key}`,{id:Un(),key:s.key,namespace:s.namespace,type:"",value:`{{ ${s.namespace}.${s.key} }}`,parentResource:{__typename:"Product"}})}}):o==null||o.product.metafields.filter(f=>!!f).forEach(f=>{u.set(`${f.namespace}.${f.key}`,f)}),{isLoading:a,fetchedMetafields:u}},[t==null?void 0:t.platform,a,n,o==null?void 0:o.product.metafields]),"contextValue: DataContextValue");return S(Fn.Provider,{value:l,children:e},void 0,!1,{fileName:bi,lineNumber:123,columnNumber:5},void 0)};var ht=(e,t)=>K(e.kind,e,{...e.context,authAttempt:t});function Ni(e){return({client:t,forward:n})=>{var r=new Set,i=Se(),a=Se(),o=new Map;function l(){u=void 0;var s=o;o=new Map,s.forEach(i.next)}function c(s){u=void 0;var d=o;o=new Map,d.forEach(_=>{a.next(_n(_,s))})}var u,f=null;return s=>{function d(){u=Promise.resolve().then(()=>e({mutate(p,g,E){var v=t.createRequestOperation("mutation",de(p,g),E);return an(nt(1)(T(b=>b.operation.key===v.key&&v.context._instance===b.operation.context._instance)(tt(()=>{var b=h(v);r.add(b.context._instance),i.next(b)})(w))))},appendHeaders(p,g){var E=typeof p.context.fetchOptions=="function"?p.context.fetchOptions():p.context.fetchOptions||{};return K(p.kind,p,{...p.context,fetchOptions:{...E,headers:{...E.headers,...g}}})}})).then(p=>{p&&(f=p),l()}).catch(p=>{({}).NODE_ENV!=="production"&&console.warn("authExchange()s initialization function has failed, which is unexpected.\nIf your initialization function is expected to throw/reject, catch this error and handle it explicitly.\nUnless this error is handled itll be passed onto any `OperationResult` instantly and authExchange() will block further operations and retry.",p),c(p)})}d();function _(p){o.set(p.key,ht(p,!0)),f&&!u&&(u=f.refreshAuth().then(l).catch(c))}function h(p){return f?f.addAuthToOperation(p):p}var k=T(Boolean)(ae(p=>p.kind==="teardown"?(o.delete(p.key),p):p.context._instance&&r.has(p.context._instance)?p:p.context.authAttempt?h(p):u||!f?(u||d(),o.has(p.key)||o.set(p.key,ht(p,!1)),null):function(E){return!E.context.authAttempt&&f&&f.willAuthError&&f.willAuthError(E)}(p)?(_(p),null):h(ht(p,!1)))(Q([i.source,s]))),w=n(k);return Q([a.source,T(p=>!r.has(p.operation.context._instance)&&p.error&&function(E){return f&&f.didAuthError&&f.didAuthError(E.error,E.operation)}(p)&&!p.operation.context.authAttempt?(_(p.operation),!1):(r.has(p.operation.context._instance)&&r.delete(p.operation.context._instance),!0))(w)])}}}const qn="blinks-app-token";class Fe{static parseTokenData(t){if(!t)return null;try{const n=JSON.parse(t);if(typeof n.access_token!="string"||n.access_token.length===0)throw"invalid token";return n}catch{return null}}static saveTokenData(t){try{localStorage.setItem(`${qn}`,JSON.stringify(t))}catch{}}static getToken(){try{return this.parseTokenData(localStorage.getItem(`${qn}`))}catch{return null}}}Ln(Fe,"fetchStorefrontToken",async()=>fetch(`/apps/blinks-app-proxy/storefront-token?shop=${window.Shopify.shop}`,{headers:{"Content-Type":"application/json"}}).then(t=>t.json()));var wi="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/providers/StorefrontGqlProvider.tsx";const xi=new Gr({url:`${window.location.origin}/api/2023-07/graphql.json`,exchanges:[Hr,Ni(async e=>{let t=await Fe.getToken();return{addAuthToOperation:n=>t?e.appendHeaders(n,{"X-Shopify-Storefront-Access-Token":t.access_token}):n,didAuthError:(n,r)=>{var a;const i=(a=n.response)==null?void 0:a.status;return i===401||i===403},refreshAuth:async()=>{const n=await Fe.fetchStorefrontToken();Fe.saveTokenData(n),t=n},willAuthError:n=>!t}}),Br]}),Ei=({children:e})=>S(si,{value:xi,children:e},void 0,!1,{fileName:wi,lineNumber:50,columnNumber:3},void 0),mt=e=>`${(e==null?void 0:e.top)??"0"} ${(e==null?void 0:e.right)??"0"} ${(e==null?void 0:e.bottom)??"0"} ${(e==null?void 0:e.left)??"0"}`;var Rn="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/components/ButtonIcon.tsx";const Si={amazon:"https://static.cdnlogo.com/logos/a/1/amazon-icon.svg",ebay:"https://static.cdnlogo.com/logos/e/96/ebay.png",etsy:"https://static.cdnlogo.com/logos/e/82/etsy.svg",star:"https://cdn0.iconfinder.com/data/icons/typicons-2/24/star-64.png",file:"https://cdn4.iconfinder.com/data/icons/48-bubbles/48/12.File-64.png",link:"https://cdn0.iconfinder.com/data/icons/evericons-16px/16/external-link-64.png"},$i=({config:{icon:e}})=>{if(e.type==="disabled"||e.type==="url"&&!e.src)return null;const t=e.type==="preset"?Si[e.variant]:e.src;return S("div",{className:"blinks-app__btn-icon",children:S("img",{src:t},void 0,!1,{fileName:Rn,lineNumber:25,columnNumber:7},void 0)},void 0,!1,{fileName:Rn,lineNumber:24,columnNumber:5},void 0)};var yt="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/components/Button.tsx";const Oi=`
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow-x: hidden;`,Mn=(e,t=location)=>{let n;if(!e)return"#";try{n=new URL(e)}catch{n=new URL(`//${e}`,t)}return n},Di=({config:e})=>{var f,s;const{fetchedMetafields:t}=jn(),{isDemo:n,bootstrap:{editButtonId:r,onButtonEdit:i}}=Ie(),a=n&&e.id===r,{url:o,label:l}=e.data,c=()=>{var d;if(l.type==="static")return l.static;if(l.type==="metafield"&&l.metafield)return(d=t.get(`${l.metafield.namespace}.${l.metafield.key}`))==null?void 0:d.value},u=()=>{var d;if(o.type==="static")return Mn(o.static);if(o.type==="metafield"&&o.metafield)return Mn((d=t.get(`${o.metafield.namespace}.${o.metafield.key}`))==null?void 0:d.value)};return!n&&!u()?null:S("a",{className:`blinks-app__btn blinks-app__btn_${e.id} ${a?"blinks-app__btn--editing":""}`,target:e.settings.targetBlank?"_blank":"_self",onClick:d=>{n&&(d.preventDefault(),i==null||i(e.id))},href:(f=u())==null?void 0:f.toString(),children:[S($i,{config:e},void 0,!1,{fileName:yt,lineNumber:86,columnNumber:7},void 0),e.enabled&&!!c()&&S("span",{className:"blinks-app__btn-link-text",...e.appearance.truncate&&{style:Oi},children:e.appearance.capitalize?(s=c())==null?void 0:s.toUpperCase():c()},void 0,!1,{fileName:yt,lineNumber:88,columnNumber:9},void 0)]},void 0,!0,{fileName:yt,lineNumber:73,columnNumber:5},void 0)},Ai=e=>{const{block:t,title:n}=e,r=n.inheritStyle;return`
    .blinks-app-block {
      --blinks-root-max-width: ${t.maxWidth};
      --blinks-root-font-family: ${t.fontFamily};
      --blinks-root-bg: ${t.background};
      --blinks-root-border-radius: ${t.borderRadius};

      --blinks-title-align: ${n.align};
      --blinks-title-font-size: ${r?"inherit":n.fontSize};
      --blinks-title-font-family: ${r?"inherit":n.fontSize};
      --blinks-title-font-weight: ${r?"inherit":n.fontWeight};
      --blinks-title-color: ${r?"inherit":n.color};


      --blinks-list-direction: ${t.direction};
      --blinks-list-wrap: ${t.direction==="column"?"nowrap":"wrap"};
      --blinks-list-gap: ${t.gap};
    }
  `},Ti=e=>{const{appearance:t,icon:n}=e;return`
    .blinks-app__btn_${e.id} {
      --blinks-btn-height: ${t.height};
      --blinks-btn-content-align: ${t.align};

      --blinks-btn-padding-x: ${t.paddingX};
      --blinks-btn-padding-y: ${t.paddingY};

      --blinks-btn-font-family: inherit;
      --blinks-btn-font-size: ${t.fontSize};
      --blinks-btn-font-weight: ${t.fontWeight};

      --blinks-btn-color: ${t.color};
      --blinks-btn-color-hover: ${t.hoverColor};
      --blinks-btn-bg: ${t.background};
      --blinks-btn-bg-hover: ${t.backgroundHover};

      --blinks-btn-border-width: ${t.borderWidth};
      --blinks-btn-border-color: ${t.borderColor};
      --blinks-btn-border-radius: ${t.borderRadius};

      --blinks-btn-icon-gap: ${n.gap};
      --blinks-btn-icon-size: ${n.size};
    }
  `},Ci=`.blinks-app-block{display:flex;flex-flow:column nowrap;line-height:1.2;max-width:var(--blinks-root-max-width);font-family:var(--blinks-root-font-family);background:var(--blinks-root-bg);border-radius:var(--blinks-root-border-radius)}.blinks-app__title{text-align:var(--blinks-title-align);font-family:var(--blinks-title-font-family);font-size:var(--blinks-title-font-size);font-weight:var(--blinks-title-font-weight);color:var(--blinks-title-color)}.blinks-app__list{display:flex;flex-flow:var(--blinks-list-direction) var(--blinks-list-wrap);gap:var(--blinks-list-gap)}.blinks-app__btn{display:flex;flex-flow:row nowrap;justify-content:var(--blinks-btn-content-align);align-items:center;text-decoration:none;padding:var(--blinks-btn-padding-y) var(--blinks-btn-padding-x);min-height:var(--blinks-btn-height);gap:var(--blinks-btn-icon-gap);color:var(--blinks-btn-color);background:var(--blinks-btn-bg);border:var(--blinks-btn-border-width) solid var(--blinks-btn-border-color);border-radius:var(--blinks-btn-border-radius);cursor:pointer;transition:color .2s ease,background-color .2s ease,opacity .2s ease}.blinks-app__btn:hover{color:var(--blinks-btn-color-hover);background:var(--blinks-btn-bg-hover);text-decoration:none;opacity:.9}.blinks-app__btn-link-text{font-family:var(--blinks-btn-font-family);font-size:var(--blinks-btn-font-size);font-weight:var(--blinks-btn-font-weight);overflow-y:hidden}.blinks-app__btn-icon{min-width:var(--blinks-btn-icon-size);height:var(--blinks-btn-icon-size);width:auto}.blinks-app__btn-icon>img{width:auto;height:var(--blinks-btn-icon-size);object-fit:cover}.blinks-app__btn--editing{outline:2px dashed #3b4ef7;outline-offset:2px}
`;var je="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/components/Style.tsx";const Pi=()=>{const{settings:e}=Ie(),t=Qe(re(()=>Ai(e),[e]),"configStyle"),n=e.buttons.map(Ti).join(`
`);return S(H,{children:[S("style",{children:t},void 0,!1,{fileName:je,lineNumber:17,columnNumber:7},void 0),S("style",{children:n},void 0,!1,{fileName:je,lineNumber:18,columnNumber:7},void 0),S("style",{children:Ci},void 0,!1,{fileName:je,lineNumber:19,columnNumber:7},void 0),S("style",{children:e.userCss},void 0,!1,{fileName:je,lineNumber:20,columnNumber:7},void 0)]},void 0)};var Z="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/components/Widget.tsx";const Vi=()=>{var l;const{settings:{block:e,title:t,buttons:n},isDemo:r}=Ie(),{isLoading:i,fetchedMetafields:a}=jn(),o=r||n.some(c=>{var s,d,_,h;let u=!1,f=!1;return c.data.label.type==="static"?c.data.label.static&&(u=!0):a.has(`${(s=c.data.label.metafield)==null?void 0:s.namespace}.${(d=c.data.label.metafield)==null?void 0:d.key}`)&&(u=!0),c.data.url.type==="static"?c.data.url.static&&(f=!0):a.has(`${(_=c.data.url.metafield)==null?void 0:_.namespace}.${(h=c.data.url.metafield)==null?void 0:h.key}`)&&(f=!0),f&&u});return(l=window.Shopify)!=null&&l.designMode&&!i&&!o?S("div",{style:"margin: 2px;",children:S("div",{style:"border: 2px dashed red; padding: 5px",children:"Widget will be hidden for this product (No data)"},void 0,!1,{fileName:Z,lineNumber:55,columnNumber:9},void 0)},void 0,!1,{fileName:Z,lineNumber:54,columnNumber:7},void 0):o?S(H,{children:[S(Pi,{},void 0,!1,{fileName:Z,lineNumber:68,columnNumber:7},void 0),S("div",{className:"blinks-app-block",style:{margin:mt(e.margin),padding:mt(e.padding)},children:[t.show&&S("div",{className:"blinks-app__title",style:{margin:mt(t.margin)},children:t.value},void 0,!1,{fileName:Z,lineNumber:77,columnNumber:11},void 0),S("div",{className:"blinks-app__list",children:n.map(c=>S(Di,{config:c},c.id,!1,{fileName:Z,lineNumber:86,columnNumber:13},void 0))},void 0,!1,{fileName:Z,lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:Z,lineNumber:69,columnNumber:7},void 0)]},void 0):null};var qe="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/components/App.tsx";const Ii=({bootstrap:e})=>S(yi,{bootstrap:e,children:S(Ei,{children:S(ki,{bootstrap:e,children:S(Vi,{},void 0,!1,{fileName:qe,lineNumber:16,columnNumber:9},void 0)},void 0,!1,{fileName:qe,lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:qe,lineNumber:14,columnNumber:5},void 0)},void 0,!1,{fileName:qe,lineNumber:13,columnNumber:3},void 0);var Fi="/Users/kir/dev/shopify/blinks-app/apps/button-tree/web/app-widget/src/main.tsx";const bt=Me.windowRuntimeKey;return window[bt]=(e,t)=>{Qn(S(Ii,{bootstrap:t},void 0,!1,{fileName:Fi,lineNumber:12,columnNumber:10},void 0),e)},window[bt](document.getElementById("app"),{platform:ee.Demo}),L.LIB_KEY=bt,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),L}({});
